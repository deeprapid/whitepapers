---
layout: default
---

<article class="whitepaper">
    <!-- Reading Progress Bar -->
    <div class="reading-progress">
        <div class="progress-bar"></div>
    </div>

    <!-- Whitepaper Header -->
    <header class="whitepaper-header">
        <div class="container p-8">
            <nav class="breadcrumb">
                <a href="{{ '/' | relative_url }}">Home</a>
                <span class="separator">/</span>
                <span class="current">{{ page.title }}</span>
            </nav>
            
            <h1 class="whitepaper-title">{{ page.title }}</h1>
            
            {% if page.subtitle %}
            <p class="whitepaper-subtitle">{{ page.subtitle }}</p>
            {% endif %}
            
            <div class="whitepaper-meta">
                <div class="meta-item">
                    <i class="fas fa-calendar"></i>
                    <span>{{ page.date | date: "%B %d, %Y" }}</span>
                </div>
                
                {% if page.author %}
                <div class="meta-item">
                    <i class="fas fa-user"></i>
                    <span>{{ page.author }}</span>
                </div>
                {% endif %}
                
                {% if page.reading_time %}
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>{{ page.reading_time }} min read</span>
                </div>
                {% endif %}
                
                {% if page.tags %}
                <div class="meta-item">
                    <i class="fas fa-tags"></i>
                    <div class="tags">
                        {% for tag in page.tags %}
                        <span class="tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Whitepaper Content -->
    <div class="whitepaper-content">
        <div class="container p-8">
            <div class="content-wrapper">
                <!-- Table of Contents -->
                <aside class="toc-sidebar">
                    <div class="toc-container">
                        <h3 class="toc-title">Table of Contents</h3>
                        <nav class="toc-nav" id="toc">
                            <!-- Generated by JavaScript -->
                        </nav>
                    </div>
                </aside>

                <!-- Main Content -->
                <div class="content-main">
                    <div class="content-body">
                        {{ content }}
                    </div>
                    
                                        <!-- Table of Contents Functionality -->
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            // Initialize TOC functionality
                            initTOC();
                        });
                        
                        function initTOC() {
                            const tocContainer = document.querySelector('.toc-container');
                            if (!tocContainer) return;
                            
                            const tocTitle = tocContainer.querySelector('.toc-title');
                            const tocNav = tocContainer.querySelector('.toc-nav');
                            
                            // Add toggle all button
                            const toggleAllBtn = document.createElement('span');
                            toggleAllBtn.className = 'toc-toggle-all';
                            toggleAllBtn.textContent = 'Collapse All';
                            toggleAllBtn.onclick = toggleAllSections;
                            tocTitle.appendChild(toggleAllBtn);
                            
                            // Add toggle buttons to h2 links
                            const h2Links = tocNav.querySelectorAll('.toc-h2');
                            h2Links.forEach(function(h2Link) {
                                const toggleBtn = document.createElement('span');
                                toggleBtn.className = 'toc-toggle';
                                toggleBtn.innerHTML = 'â–¶';
                                toggleBtn.onclick = function(e) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    toggleSection(h2Link);
                                };
                                h2Link.appendChild(toggleBtn);
                                
                                // Initially hide all h3 and h4 links
                                let nextElement = h2Link.nextElementSibling;
                                while (nextElement && (nextElement.classList.contains('toc-h3') || nextElement.classList.contains('toc-h4'))) {
                                    nextElement.classList.remove('expanded');
                                    nextElement = nextElement.nextElementSibling;
                                }
                            });
                            
                            // Initially collapse all sections
                            // (Now handled per section above)
                            
                            function toggleSection(h2Link) {
                                const toggleBtn = h2Link.querySelector('.toc-toggle');
                                const isExpanded = toggleBtn.classList.contains('expanded');
                                
                                if (isExpanded) {
                                    collapseSection(h2Link);
                                } else {
                                    expandSection(h2Link);
                                }
                            }
                            
                            function expandSection(h2Link) {
                                const toggleBtn = h2Link.querySelector('.toc-toggle');
                                toggleBtn.classList.add('expanded');
                                
                                // Find and expand all child links
                                let nextElement = h2Link.nextElementSibling;
                                while (nextElement && (nextElement.classList.contains('toc-h3') || nextElement.classList.contains('toc-h4'))) {
                                    nextElement.classList.add('expanded');
                                    nextElement = nextElement.nextElementSibling;
                                }
                            }
                            
                            function collapseSection(h2Link) {
                                const toggleBtn = h2Link.querySelector('.toc-toggle');
                                toggleBtn.classList.remove('expanded');
                                
                                // Find and collapse all child links
                                let nextElement = h2Link.nextElementSibling;
                                while (nextElement && (nextElement.classList.contains('toc-h3') || nextElement.classList.contains('toc-h4'))) {
                                    nextElement.classList.remove('expanded');
                                    nextElement = nextElement.nextElementSibling;
                                }
                            }
                            
                            function expandAllSections() {
                                h2Links.forEach(expandSection);
                                toggleAllBtn.textContent = 'Collapse All';
                            }
                            
                            function collapseAllSections() {
                                h2Links.forEach(collapseSection);
                                toggleAllBtn.textContent = 'Expand All';
                            }
                            
                            function toggleAllSections() {
                                const isAllExpanded = Array.from(h2Links).every(h2Link => 
                                    h2Link.querySelector('.toc-toggle').classList.contains('expanded')
                                );
                                
                                if (isAllExpanded) {
                                    collapseAllSections();
                                } else {
                                    expandAllSections();
                                }
                            }
                        }
                    </script>
                    
                    <!-- Language Tabs for Code Examples -->
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            console.log('Initializing language tabs...');
                            
                            // Find all multi-language code sections
                            const codeSections = [];
                            
                            // Get all strong elements that contain language labels
                            const languageLabels = document.querySelectorAll('strong');
                            console.log('Found', languageLabels.length, 'strong elements');
                            
                            // Don't hide language labels immediately - only hide them when tabs are created
                            
                            // Find sections with multiple language examples
                            let currentSection = null;
                            let sectionStart = null;
                            
                            for (let i = 0; i < languageLabels.length; i++) {
                                const label = languageLabels[i];
                                if (label.textContent.includes(':')) {
                                    console.log('Found language label:', label.textContent);
                                    
                                    // Check if this is a programming language label
                                    const languageName = label.textContent.replace(':', '').trim();
                                    if (['Python', 'JavaScript', 'Go', 'Rust'].includes(languageName)) {
                                        if (!currentSection) {
                                            // Start a new section
                                            currentSection = {
                                                title: label,
                                                codeBlocks: [],
                                                labels: []
                                            };
                                            sectionStart = label;
                                        }
                                        currentSection.labels.push(label);
                                        
                                        // Find the code block that follows this label
                                        console.log('Looking for code block after:', label.textContent);
                                        let foundCodeBlock = false;
                                        
                                        // Look for code blocks that come after this label in the document
                                        let currentElement = label;
                                        for (let j = 0; j < 20; j++) { // Check up to 20 elements ahead
                                            currentElement = currentElement.nextElementSibling;
                                            if (!currentElement) {
                                                // If no next sibling, try to go up to parent and then to next sibling
                                                const parent = label.parentElement;
                                                if (parent && parent.nextElementSibling) {
                                                    currentElement = parent.nextElementSibling;
                                                } else {
                                                    break;
                                                }
                                            }
                                            
                                            console.log('Checking element:', currentElement.tagName, currentElement.className);
                                            
                                            if (currentElement.tagName === 'PRE' || currentElement.classList.contains('highlight') || 
                                                (currentElement.tagName === 'DIV' && currentElement.classList.contains('highlighter-rouge'))) {
                                                console.log('Found code block:', currentElement.tagName, currentElement.className);
                                                currentSection.codeBlocks.push(currentElement);
                                                foundCodeBlock = true;
                                                break;
                                            }
                                            
                                            // If we hit another language label, stop looking
                                            if (currentElement.tagName === 'STRONG' && currentElement.textContent.includes(':')) {
                                                console.log('Hit another language label, stopping search');
                                                break;
                                            }
                                        }
                                        
                                        if (!foundCodeBlock) {
                                            console.log('No code block found after:', label.textContent);
                                        }
                                    } else {
                                        // This is not a programming language label, end current section
                                        if (currentSection && currentSection.codeBlocks.length >= 2) {
                                            console.log('Creating tabs for section starting with:', sectionStart.textContent, 'with', currentSection.codeBlocks.length, 'code blocks');
                                            codeSections.push(currentSection);
                                        }
                                        currentSection = null;
                                        sectionStart = null;
                                    }
                                }
                            }
                            
                            // Check the last section
                            if (currentSection && currentSection.codeBlocks.length >= 2) {
                                console.log('Creating tabs for final section starting with:', sectionStart.textContent, 'with', currentSection.codeBlocks.length, 'code blocks');
                                codeSections.push(currentSection);
                            }
                            
                            console.log('Found', codeSections.length, 'multi-language sections');
                            
                            // Process each multi-language section
                            codeSections.forEach(function(section, sectionIndex) {
                                console.log('Processing section', sectionIndex, 'with', section.labels.length, 'labels and', section.codeBlocks.length, 'code blocks');
                                

                                
                                // Create tab container
                                const tabContainer = document.createElement('div');
                                tabContainer.className = 'code-tabs';
                                
                                // Create tab buttons
                                const tabButtons = document.createElement('div');
                                tabButtons.className = 'tab-buttons';
                                
                                const languages = ['python', 'javascript', 'go', 'rust'];
                                const languageNames = ['Python', 'JavaScript', 'Go', 'Rust'];
                                
                                languages.forEach(function(lang, index) {
                                    const tab = document.createElement('button');
                                    tab.className = 'tab-button' + (index === 0 ? ' active' : '');
                                    tab.textContent = languageNames[index];
                                    tab.onclick = function() { switchTab(this, lang, section); };
                                    tabButtons.appendChild(tab);
                                });
                                
                                tabContainer.appendChild(tabButtons);
                                
                                // Insert tab container before the first code block
                                const firstCodeBlock = section.codeBlocks[0];
                                firstCodeBlock.parentNode.insertBefore(tabContainer, firstCodeBlock);
                                
                                // Initially hide all but the first code block
                                section.codeBlocks.forEach(function(codeBlock, index) {
                                    if (index > 0) {
                                        codeBlock.style.display = 'none';
                                    }
                                });
                                
                                // Hide all language labels since tabs handle the display
                                section.labels.forEach(function(label) {
                                    label.style.display = 'none';
                                });
                            });
                            
                            function switchTab(button, language, section) {
                                console.log('Switching to', language, 'for section:', section.title.textContent);
                                
                                // Remove active class from all buttons in this section
                                const buttons = button.parentElement.querySelectorAll('.tab-button');
                                buttons.forEach(btn => btn.classList.remove('active'));
                                
                                // Add active class to clicked button
                                button.classList.add('active');
                                
                                // Show/hide code blocks based on language
                                section.codeBlocks.forEach(function(codeBlock, index) {
                                    // Check if this is a Rouge-highlighted div
                                    if (codeBlock.tagName === 'DIV' && codeBlock.classList.contains('highlighter-rouge')) {
                                        if (codeBlock.classList.contains('language-' + language)) {
                                            codeBlock.style.display = 'block';
                                        } else {
                                            codeBlock.style.display = 'none';
                                        }
                                    } else {
                                        // Handle regular pre/code elements
                                        const codeElement = codeBlock.querySelector('code');
                                        if (codeElement && codeElement.className.includes(language)) {
                                            codeBlock.style.display = 'block';
                                        } else {
                                            codeBlock.style.display = 'none';
                                        }
                                    }
                                });
                                
                                // Language labels should always be hidden since tabs handle the language display
                                section.labels.forEach(function(label) {
                                    label.style.display = 'none';
                                });
                            }
                        });
                    </script>
                    
                    <!-- Whitepaper Footer -->
                    <footer class="whitepaper-footer">
                        <div class="share-buttons">
                            <h4>Share this whitepaper</h4>
                            <div class="share-links">
                                <a href="https://twitter.com/intent/tweet?text={{ page.title | url_encode }}&url={{ page.url | absolute_url | url_encode }}" target="_blank" rel="noopener" class="share-link twitter">
                                    <i class="fab fa-twitter"></i>
                                    <span>Twitter</span>
                                </a>
                                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ page.url | absolute_url | url_encode }}" target="_blank" rel="noopener" class="share-link linkedin">
                                    <i class="fab fa-linkedin"></i>
                                    <span>LinkedIn</span>
                                </a>
                                <a href="mailto:?subject={{ page.title | url_encode }}&body={{ page.url | absolute_url | url_encode }}" class="share-link email">
                                    <i class="fas fa-envelope"></i>
                                    <span>Email</span>
                                </a>
                            </div>
                        </div>
                        
                        <div class="navigation-links">
                            {% if page.previous %}
                            <a href="{{ page.previous.url | relative_url }}" class="nav-link prev">
                                <i class="fas fa-arrow-left"></i>
                                <span>{{ page.previous.title }}</span>
                            </a>
                            {% endif %}
                            
                            {% if page.next %}
                            <a href="{{ page.next.url | relative_url }}" class="nav-link next">
                                <span>{{ page.next.title }}</span>
                                <i class="fas fa-arrow-right"></i>
                            </a>
                            {% endif %}
                        </div>
                    </footer>
                </div>
            </div>
        </div>
    </div>
</article>

<script>
// Reading progress bar
window.addEventListener('scroll', () => {
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.querySelector('.progress-bar').style.width = scrolled + '%';
});

// Generate table of contents
document.addEventListener('DOMContentLoaded', () => {
    const headings = document.querySelectorAll('h2, h3, h4');
    const toc = document.getElementById('toc');
    
    headings.forEach((heading, index) => {
        const id = `heading-${index}`;
        heading.id = id;
        
        const link = document.createElement('a');
        link.href = `#${id}`;
        link.textContent = heading.textContent;
        link.className = `toc-link toc-${heading.tagName.toLowerCase()}`;
        
        const li = document.createElement('li');
        li.appendChild(link);
        toc.appendChild(li);
    });
});
</script> 